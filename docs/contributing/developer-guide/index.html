<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Developer Guide | DraNet</title>
<meta name=description content="Develop locally Use KIND
Create kind cluster with the recommended config make kind-cluster Do your changess to the codebase and rollout the custom version to the kind cluster make kind-image Test your changes locally, use the examples folder for dropping manifests and README of the scenarios you are testing.
Once finish the development add an e2e test in bash using the bats framework in the tests folder
You can run your tests locally using bats tests/"><meta property="og:url" content="https://dranet.dev/docs/contributing/developer-guide/"><meta property="og:site_name" content="DraNet"><meta property="og:title" content="Developer Guide"><meta property="og:description" content="Develop locally Use KIND
Create kind cluster with the recommended config make kind-cluster Do your changess to the codebase and rollout the custom version to the kind cluster make kind-image Test your changes locally, use the examples folder for dropping manifests and README of the scenarios you are testing.
Once finish the development add an e2e test in bash using the bats framework in the tests folder
You can run your tests locally using bats tests/"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-05-25T11:30:40+00:00"><meta property="article:modified_time" content="2025-05-25T11:30:40+00:00"><meta itemprop=name content="Developer Guide"><meta itemprop=description content="Develop locally Use KIND
Create kind cluster with the recommended config make kind-cluster Do your changess to the codebase and rollout the custom version to the kind cluster make kind-image Test your changes locally, use the examples folder for dropping manifests and README of the scenarios you are testing.
Once finish the development add an e2e test in bash using the bats framework in the tests folder
You can run your tests locally using bats tests/"><meta itemprop=datePublished content="2025-05-25T11:30:40+00:00"><meta itemprop=dateModified content="2025-05-25T11:30:40+00:00"><meta itemprop=wordCount content="451"><meta name=twitter:card content="summary"><meta name=twitter:title content="Developer Guide"><meta name=twitter:description content="Develop locally Use KIND
Create kind cluster with the recommended config make kind-cluster Do your changess to the codebase and rollout the custom version to the kind cluster make kind-image Test your changes locally, use the examples folder for dropping manifests and README of the scenarios you are testing.
Once finish the development add an e2e test in bash using the bats framework in the tests folder
You can run your tests locally using bats tests/"><link rel=preload href=/scss/main.min.48c25d0a5a23a1e8cae94d6c5e7622061e5345cf098171b1d6ee41d8e309e6c8.css as=style integrity="sha256-SMJdClojoejK6U1sXnYiBh5TRc8JgXGx1u5B2OMJ5sg=" crossorigin=anonymous><link href=/scss/main.min.48c25d0a5a23a1e8cae94d6c5e7622061e5345cf098171b1d6ee41d8e309e6c8.css rel=stylesheet integrity="sha256-SMJdClojoejK6U1sXnYiBh5TRc8JgXGx1u5B2OMJ5sg=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YH3W884R6Z"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YH3W884R6Z")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>DraNet</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/docs/user><span>User Guides</span></a></li><li class=nav-item><a class=nav-link href=/docs/concepts><span>Concepts</span></a></li><li class=nav-item><a class=nav-link href=/docs/contributing><span>Contributing</span></a></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>DraNet</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsquick-start-li><a href=/docs/quick-start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsquick-start><span>Quick Start</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuser-li><a href=/docs/user/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser><span>User Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusermpi-operator-li><a href=/docs/user/mpi-operator/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsusermpi-operator><span>MPI Operator on GKE</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuserinterface-configuration-li><a href=/docs/user/interface-configuration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuserinterface-configuration><span>Interface Configuration</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconcepts-li><a href=/docs/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsconcepts><span>Concepts</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsinterface-status-li><a href=/docs/concepts/interface-status/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsinterface-status><span>Interface Status</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptshardware-efficiency-li><a href=/docs/concepts/hardware-efficiency/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptshardware-efficiency><span>Hardware Efficiency</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsrdma-li><a href=/docs/concepts/rdma/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsrdma><span>RDMA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsrdma-modes-li><a href=/docs/concepts/rdma-modes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsrdma-modes><span>RDMA Device Handling</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptshowitworks-li><a href=/docs/concepts/howitworks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptshowitworks><span>How It Works</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsreferences-li><a href=/docs/concepts/references/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsreferences><span>References</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docscontributing-li><a href=/docs/contributing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributing><span>Contributing</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docscontributingdeveloper-guide-li><a href=/docs/contributing/developer-guide/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docscontributingdeveloper-guide><span class=td-sidebar-nav-active-item>Developer Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingcontributing-li><a href=/docs/contributing/contributing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingcontributing><span>Contributing</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/google/dranet/tree/main/site/content/docs/contributing/developer-guide.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/google/dranet/edit/main/site/content/docs/contributing/developer-guide.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/google/dranet/new/main/site/content/docs/contributing?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/google/dranet/issues/new?title=Developer%20Guide" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#develop-locally>Develop locally</a></li><li><a href=#develop-in-a-cluster>Develop in a cluster</a></li><li><a href=#troubleshooting>Troubleshooting</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>DraNet</a></li><li class=breadcrumb-item><a href=/docs/contributing/>Contributing</a></li><li class="breadcrumb-item active" aria-current=page>Developer Guide</li></ol></nav><div class=td-content><h1>Developer Guide</h1><header class=article-meta></header><h2 id=develop-locally>Develop locally</h2><p>Use <a href=https://kind.sigs.k8s.io/>KIND</a></p><ol><li>Create kind cluster with the recommended config</li></ol><pre tabindex=0><code>make kind-cluster
</code></pre><ol start=2><li>Do your changess to the codebase and rollout the custom version to the kind
cluster</li></ol><pre tabindex=0><code>make kind-image
</code></pre><ol start=3><li><p>Test your changes locally, use the <a href=./examples>examples folder</a> for dropping manifests
and README of the scenarios you are testing.</p></li><li><p>Once finish the development add an e2e test in bash using the <code>bats</code>
framework in <a href=./tests>the tests folder</a></p></li></ol><p>You can run your tests locally using <code>bats tests/</code></p><h2 id=develop-in-a-cluster>Develop in a cluster</h2><ol><li>Build and push the image to a registry</li></ol><pre tabindex=0><code>docker build . --tag aojea/dranet:test --push
</code></pre><ol start=2><li>Install dranet</li></ol><pre tabindex=0><code>kubect apply -f ./install.yaml
</code></pre><ol start=3><li>When developing new features update the image of the <code>dranet</code> daemonset and set the Daemonset image with the current hash</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ kubectl set image ds/dranet -n kube-system dranet=docker.io/aojea/dranet:test@sha256:0e3ded3f62041a71e5589ffce92ff110be95ed772b2eb23ad5f285bb0147a425
</span></span><span style=display:flex><span>daemonset.apps/dranet image updated
</span></span><span style=display:flex><span>$ kubectl rollout status ds/dranet -n kube-system
</span></span><span style=display:flex><span>Waiting <span style=color:#00f>for</span> daemon set <span style=color:#a31515>&#34;dranet&#34;</span> rollout to finish: 1 out of 5 new pods have been
</span></span><span style=display:flex><span>updated...
</span></span></code></pre></div><h2 id=troubleshooting>Troubleshooting</h2><p>To get the list of <code>dranet</code> Pods use the label:</p><pre tabindex=0><code>kubectl -n kube-system get pods -l app=dranet -o wide
NAME           READY   STATUS             RESTARTS         AGE   IP              NODE                                            NOMINATED NODE   READINESS GATES
dranet-9z66b   0/1     CrashLoopBackOff   12 (4m54s ago)   42m   10.146.104.1
</code></pre><p>To identify the version running you can find the git commit is in the first line of logging</p><pre tabindex=0><code>kubectl -n kube-system logs dranet-9z66b
Defaulted container &#34;dranet&#34; out of: dranet, enable-nri (init)
I0520 09:21:02.486329 1027992 app.go:181] dranet go go1.24.3 build: 3058756228b78265819e96963afae4dfd9497849 time: 2025-05-19T22:57:49Z
I0520 09:21:02.486404 1027992 app.go:75] FLAG: --add_dir_header=&#34;false&#34;
I0520 09:21:02.486409 1027992 app.go:75] FLAG: --alsologtostderr=&#34;false&#34;
I0520 09:21:02.486411 1027992 app.go:75] FLAG: --bind-address=&#34;:9177&#34;
I0520 09:21:02.486413 1027992 app.go:75] FLAG: --filter=&#34;attributes[\&#34;dra.net/type\&#34;].StringValue  != \&#34;veth\&#34;&#34;
I0520 09:21:02.486415 1027992 app.go:75] FLAG: --hostname-override=&#34;&#34;
I0520 09:21:02.486417 1027992 app.go:75] FLAG: --kubeconfig=&#34;&#34;
I0520 09:21:02.486418 1027992 app.go:75] FLAG: --log_backtrace_at=&#34;:0&#34;
I0520 09:21:02.486423 1027992 app.go:75] FLAG: --log_dir=&#34;&#34;
I0520 09:21:02.486424 1027992 app.go:75] FLAG: --log_file=&#34;&#34;
I0520 09:21:02.486425 1027992 app.go:75] FLAG: --log_file_max_size=&#34;1800&#34;
I0520 09:21:02.486427 1027992 app.go:75] FLAG: --logtostderr=&#34;true&#34;
I0520 09:21:02.486429 1027992 app.go:75] FLAG: --one_output=&#34;false&#34;
I0520 09:21:02.486430 1027992 app.go:75] FLAG: --skip_headers=&#34;false&#34;
I0520 09:21:02.486435 1027992 app.go:75] FLAG: --skip_log_headers=&#34;false&#34;
I0520 09:21:02.486436 1027992 app.go:75] FLAG: --stderrthreshold=&#34;2&#34;
I0520 09:21:02.486440 1027992 app.go:75] FLAG: --v=&#34;4&#34;
I0520 09:21:02.486442 1027992 app.go:75] FLAG: --vmodule=&#34;&#34;
I0520 09:21:02.486599 1027992 envvar.go:172] &#34;Feature gate default state&#34; feature=&#34;ClientsAllowCBOR&#34; enabled=false
I0520 09:21:02.486609 1027992 envvar.go:172] &#34;Feature gate default state&#34; feature=&#34;ClientsPreferCBOR&#34; enabled=false
I0520 09:21:02.486611 1027992 envvar.go:172] &#34;Feature gate default state&#34; feature=&#34;InformerResourceVersion&#34; enabled=false
I0520 09:21:02.486614 1027992 envvar.go:172] &#34;Feature gate default state&#34; feature=&#34;InOrderInformers&#34; enabled=true
I0520 09:21:02.486616 1027992 envvar.go:172] &#34;Feature gate default state&#34; feature=&#34;WatchListClient&#34; enabled=false
I0520 09:21:02.491702 1027992 draplugin.go:486] &#34;Starting&#34;
I0520 09:21:02.491855 1027992 nonblockinggrpcserver.go:88] &#34;GRPC server started&#34; logger=&#34;dra&#34;
I0520 09:21:02.491919 1027992 nonblockinggrpcserver.go:88] &#34;GRPC server started&#34; logger=&#34;registrar&#34;
time=&#34;2025-05-20T09:21:04Z&#34; level=info msg=&#34;Created plugin 00-dra.net (dranet, handles RunPodSandbox,StopPodSandbox,RemovePodSandbox)&#34;
I0520 09:21:04.492764 1027992 app.go:157] driver started
I0520 09:21:04.492786 1027992 driver.go:430] Publishing resources
time=&#34;2025-05-20T09:21:04Z&#34; level=info msg=&#34;Registering plugin 00-dra.net...&#34;
I0520 09:21:04.493135 1027992 cloud.go:38] running on GCE
time=&#34;2025-05-20T09:21:04Z&#34; level=info msg=&#34;Configuring plugin 00-dra.net for runtime containerd/1.7.24...&#34;
</code></pre></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="SIG Network mailing list" aria-label="SIG Network mailing list"><a target=_blank rel=noopener href=https://groups.google.com/forum/#!forum/kubernetes-sig-network aria-label="SIG Network mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/google/dranet aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://kubernetes.slack.com/messages/sig-network aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024&ndash;2025
<span class=td-footer__authors>Google LLC | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.d9615597e83c4193e3ab1e6816bad5c8741894e92c5b5c17a8d1d4be6d9af8a2.js integrity="sha256-2WFVl+g8QZPjqx5oFrrVyHQYlOksW1wXqNHUvm2a+KI=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>